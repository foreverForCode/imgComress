<html>
<head>
    <title>用canvas压缩图片</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0"/>

    <script src="imgCompress.js"></script>
</head>
<body>


<input type="file" id="file" />
<img id="preview" alt="">

<script>

    window.onload = function () {

    	var eleFile = document.querySelector('#file');

    	var preview = document.querySelector('#preview');

        eleFile.addEventListener('change', function(event){

        	var file = event.target.files[0];

        	if(file.type.indexOf("image") === 0){

				imgCompress({
                    file : file,
					quality : 0.7,
                    callback : function (status, previewDOM, blob) {

                    	if(status){

							preview.src = previewDOM;
                        }else{

                    		console.log(data);
                        }
					}
                })
            }
        })
	}

</script>
</body>
</html>
